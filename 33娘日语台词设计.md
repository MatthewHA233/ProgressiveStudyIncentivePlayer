// 配置项
const CONFIG = {
  // ... existing code ...
  
  // 表情吐槽台词
  EXPRESSIONS_COMMENTS: {
    DEFAULT: [
      "にゃん〜ご主人様、今日の計画表は食べられちゃったのかな？(°∀°)ﾉ",
      "びっくり！ご主人様はトマトタイマーを忘れましたにゃ！(ﾟДﾟ≡ﾟДﾟ)"
    ],
    NORMAL: [
      "ふんふん〜ご主人様がサボってたらさんさんはわかるんだよ！(¬‿¬ )",
      "注意力の波動を検知〜落ち着きのない手を押さえてあげましょうか？(´• ω •`)",
      "ご主人様の視線が本から逸れているのを検知！Σ(っ°Д°;)っ",
      "小さな爪でタイマーを押さえられなくなっちゃう！(´；ω；`)"
    ],
    EFFICIENT: [
      "すごい！ご主人様の集中力が輝いてるよ！✧*｡٩(ˊωˋ*)و✧*｡",
      "効率が限界突破！さんさんをハグで褒美してくれませんか？(⁄ ⁄•⁄ω⁄•⁄ ⁄)"
    ]
  },
  // 新增学习过程吐槽
  LEARNING_COMMENTS: {
    START: [
      "ピンポーン！学習結界展開！( •̀ ω •́ )✧",
      "脳力全開モード起動！さんさんはご主人様のノートを取りますにゃ〜ฅ^•ω•^ฅ"
    ],
    LONG_SESSION: [
      "90分以上連続で勉強してますにゃ〜キャットニップエネルギー補給しますか？(=´ω｀=)",
      "ご主人様、ちょっと休憩しましょう〜さんさんのしっぽがしびれちゃいます〜(>_<)"
    ]
  },

  // 新增学习时长梯度配置
  STUDY_DURATION_LEVELS: [
    { range: [0, 1.5],   level: 'C',   theme: '理想·進取' },
    { range: [1.5, 3],   level: 'CC',  theme: '夢想·夢境' },
    { range: [3, 4.5],   level: 'CCC', theme: '感傷·堅毅' },
    { range: [4.5, 6],   level: 'B',   theme: '意志·私のターン' },
    { range: [6, 7.5],   level: 'BB',  theme: '長旅·星々' },
    { range: [7.5, 9],   level: 'BBB', theme: '悲壮·地獄' },
    { range: [9, 10.5],  level: 'A',   theme: '覚醒·貫行' },
    { range: [10.5, 12], level: 'AA',  theme: '英雄の旅·叱責' },
    { range: [12, 13],   level: 'AAA', theme: '全力·奇跡' },
    { range: [13, 13.5], level: 'S',   theme: 'ポケモン熱燃えOP' },
    { range: [13.5, 14], level: 'SS',  theme: '友情·絆' },
    { range: [14, 14.5], level: 'SSS', theme: '目指せポケモンマスター' }
  ],

  // 新增时长吐槽台词
  DURATION_COMMENTS: {
    C:   ["33号エンジン起動！ご主人様、初心者村を突破しますよ〜(๑•̀ㅂ•́)و✧", 
          "初期装備チェック完了！鉛筆が魔法の杖に変身！✧(≖ ◡ ≖✿)"],
    CC:  ["夢境接続成功！ご主人様のノートが光ってます！(✧ω✧)", 
          "脳波増幅を検知しました！さんさんが思考アクセラレーターになって加速しますよ！(ﾉ≧∀≦)ﾉ"],
    CCC: ["ここまで頑張った自分はとてもカッコいい！頭撫で褒美はいかがですか？(´•ω•̥`)", 
          "知識バリア突破IIIタイプ！さんさんの補給パックいつでも準備完了！( •̀∀•́ )✧"],
    B:   ["私のターン！難問を全て経験値に変えちゃいましょう！d(>ω< )b", 
          "意志力チャージ500%！さんさんの戦術ゴーグル起動中！( •̀ ω •́ )✧"],
    BB:  ["星々ナビゲーションモードON！ご主人様は銀河系で一番輝く星ですよ〜☆~(◍´꒳`◍)", 
          "長旅の必需品：コーヒーとさんさんの応援プレイリスト！ヽ(✿ﾟ▽ﾟ)ノ"],
    BBB: ["地獄難易度だってなんのその！さんさんがご主人様と一緒にダンジョン攻略します！(╬ Ò ‸ Ó)", 
          "覚醒！絶望を力に変えろ！伝説の称号「不滅の勇者」獲得だぁっ！٩(๑`^´๑)۶"],
    A:   ["覚醒プロトコルロード完了！知識の嵐よ、もっと激しく襲来せよ！(ﾉﾟ▽ﾟ)ﾉ", 
          "貫行モード：教科書で全ての難問を切り裂け！(╯‵□′)╯︵┻━┻"],
    AA:  ["英雄の旅のBGM発動！これはご主人様専用テーマソング〜♪(^∇^*)", 
          "光子砲チャージ！知識の黄昏に吼えろ——光の消滅に抗え！(╬▼д▼)ﾉｼ"],
    AAA: ["奇跡が現れる！ご主人様の今日の努力値が天を突き破りました！(ﾉ◕ヮ◕)ﾉ*:･ﾟ✧", 
          "全サーバーお知らせ：学習の神プレイヤーが歴史を作っています！Σ(っ°Д°;)っ"],
    S:   ["ピカチュウの10万ボルト！ご主人様の学習力が進化します！(≧∇≦)ﾉ彡☆", 
          "ゲットだぜ！次のジムバッジは確定ですね！( •̀ ω •́ )✧"],
    SS:  ["絆進化！ご主人様とさんさんのコンビ技は無敵です！(๑•̀ㅂ•́)و✧", 
          "友情守護結界展開！サボり妖怪入場禁止！(◣_◢)"],
    SSS: ["最終ターン！全ての知識ポイントをゲットする時が来ました！(≧∇≦)/~┴┴", 
          "ポケモンマスターへの道で、さんさんはいつでも最強のパートナーです！٩(๑>◡<๑)۶"]
  }
};

// 在fetchAndUpdateExpression函数中添加时长检测
async function fetchAndUpdateExpression() {
  try {
    // ... existing code ...

    // 获取学习时长（假设从studyDuration变量获取）
    let studyDuration = 0; // 这里需要替换成实际获取时长的逻辑

    // 找到对应的等级
    const currentLevel = CONFIG.STUDY_DURATION_LEVELS.find(level => 
      studyDuration >= level.range[0] && studyDuration < level.range[1]
    ) || CONFIG.STUDY_DURATION_LEVELS[CONFIG.STUDY_DURATION_LEVELS.length-1]; // 超过最大时长用最后一个

    // 获取对应吐槽
    const comments = CONFIG.DURATION_COMMENTS[currentLevel.level];
    if(comments && comments.length > 0) {
      const randomComment = comments[Math.floor(Math.random() * comments.length)];
      console.log(`【33娘】${randomComment}`);
    }

    // ... rest of the existing code ...
  }
  // ... existing error handling ...
} 